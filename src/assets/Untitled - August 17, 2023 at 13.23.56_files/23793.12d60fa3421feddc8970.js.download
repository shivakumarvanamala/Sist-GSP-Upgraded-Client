"use strict";(this.webpackChunk_hz_project_x=this.webpackChunk_hz_project_x||[]).push([[23793],{906670:(e,t,s)=>{s.d(t,{X3:()=>r});var i=s(688519);function r(e,t,{blocked:s,upgrade:r,blocking:o,terminated:n}={}){const a=indexedDB.open(e,t),c=(0,i.w)(a);return r&&a.addEventListener("upgradeneeded",(e=>{r((0,i.w)(a.result),e.oldVersion,e.newVersion,(0,i.w)(a.transaction))})),s&&a.addEventListener("blocked",(()=>s())),c.then((e=>{n&&e.addEventListener("close",(()=>n())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),c}const o=["get","getKey","getAll","getAllKeys","count"],n=["put","add","delete","clear"],a=new Map;function c(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(a.get(t))return a.get(t);const s=t.replace(/FromIndex$/,""),i=t!==s,r=n.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!o.includes(s))return;const c=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let n=o.store;return i&&(n=n.index(t.shift())),(await Promise.all([n[s](...t),r&&o.done]))[0]};return a.set(t,c),c}(0,i.r)((e=>({...e,get:(t,s,i)=>c(t,s)||e.get(t,s,i),has:(t,s)=>!!c(t,s)||e.has(t,s)})))},688519:(e,t,s)=>{s.d(t,{r:()=>h,w:()=>g});let i,r;const o=new WeakMap,n=new WeakMap,a=new WeakMap,c=new WeakMap,d=new WeakMap;let l={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return n.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return g(e[t])},set:(e,t,s)=>(e[t]=s,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){l=e(l)}function u(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(f(this),t),g(o.get(this))}:function(...t){return g(e.apply(f(this),t))}:function(t,...s){const i=e.call(f(this),t,...s);return a.set(i,t.sort?t.sort():[t]),g(i)}}function _(e){return"function"==typeof e?u(e):(e instanceof IDBTransaction&&function(e){if(n.has(e))return;const t=new Promise(((t,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));n.set(e,t)}(e),t=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,l):e);var t}function g(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(g(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&o.set(t,e)})).catch((()=>{})),d.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=_(e);return t!==e&&(c.set(e,t),d.set(t,e)),t}const f=e=>d.get(e)},531192:(e,t,s)=>{s.d(t,{q:()=>r});var i=s(988543);const r={floodgateApiKey:new i.pE("floodgateApiKey",""),floodgateClientId:new i.pE("floodgateClientId","horizon-platform"),floodgateFeaturesUrl:new i.NE("floodgateFeaturesUrl"),rrEntryName:new i.pE("rrEntryName",""),rrEntryConfigName:new i.pE("rrEntryConfigName",""),rrTrafficTargetName:new i.pE("rrTrafficTargetName",""),rrBuildSha:new i.pE("rrBuildSha",""),rrConfigSyncInterval:new i.pE("rrConfigSyncInterval",10)}},79528:(e,t,s)=>{s.d(t,{q:()=>y});var i=s(988543),r=s(370371);const o=new i.NK("env"),n=new i.NK("envName"),a=new i.NK("ingestApiKey"),c=new i.pE("aaTrackingServer","stats.adobe.com"),d=new i.pE("aaSecureTrackingServer","sstats.adobe.com"),l=new i.pE("ingestAppCategory","WEB"),h=new i.NK("appVersion"),u=new i.NK("appSAPCode"),_=new i.NK("ingestProject"),g=new i.NE("ingestHost"),f=new i.NE("ingestHostAlwaysProd"),p=new r.L0("ingest-host-always-prod-enabled",!1),E=new i.pE("ingestProcessingInterval",3e3),m=new i.pE("analyticsBufferLimit",100),v=new r.L0("use-experience-edge",!1),y={env:o,envName:n,enableAnalytics:new r.L0("enableAnalytics",!0),ingestAPIKey:a,ingestAppCategory:l,appVersion:h,appSAPCode:u,ingestProject:_,ingestHost:g,ingestHostAlwaysProd:f,ingestHostAlwaysProdEnabled:p,aaTrackingServer:c,aaSecureTrackingServer:d,ingestProcessingInterval:E,analyticsBufferLimit:m,aepConfigId:new i.NE("experience-edge-config-id","0868df6f-7d83-4bcd-a0f4-5656d4f0145a",{prod:"265427cd-70f8-4937-960a-5e42cc316895"}),aepOrgId:new i.pE("experience-edge-org-id","default"),countryCode:new i.pE("country_code",""),countryName:new i.pE("country_name",""),useExperienceEdge:v,includeIngestBuildPrefix:new r.L0("include-ingest-build-prefix",!0),otDomainId:new i.NE("otDomainId"),privacyURL:new i.NE("privacyUrl"),footerLinkSelector:new i.pE("footerLinkSelector","")}},878805:(e,t,s)=>{var i;s.d(t,{b:()=>i}),function(e){e.local="local",e.dev="dev",e.stage="stage",e.prod="prod"}(i||(i={}))},393299:(e,t,s)=>{var i;s.d(t,{C:()=>i}),function(e){e.avoid="avoid",e.latest="latest",e.unknown="unknown",e.forceUpdate="force-update",e.updateAvailable="update-available",e.updateNotify="update-notify"}(i||(i={}))},375328:(e,t,s)=>{s.d(t,{y:()=>h});var i=s(402820),r=s(878805),o=s(393299),n=s(789298),a=s(440552),c=s(750469),d=s(531192),l=s(231474);class h{constructor(){this._browserFlags={},this._featureOverrides={},this._settingOverrides={},this._featuresFromExperiments={},this._pendingExperimentsFeatureFlags={},this._updateListeners={},this.sessionId=(0,i.Z)(),this._initialized=!1,this._initPromiseSettingOverrides=new Promise((e=>{this._initResolveSettingOverrides=e})),this._initPromiseFeatureOverrides=new Promise((e=>{this._initResolveFeatureOverrides=e})),this._initPromiseBrowserFlags=new Promise((e=>{this._initResolveBrowserFlags=e})),this._atpFactoryPromise=new Promise((e=>{this._atpFactoryResolver=e}))}static singleton(){return h._singleton||(h._singleton=new h),h._singleton}static async createInitializeAttach(e,t,s,i,r,o,n){const a=new h;return await a.initialize(e,t,s,i,r,n),o&&a.attach(o),a}registerListener(e,t){this._updateListeners[e]=t}isInExperiment(e){return"boolean"==typeof this._featuresFromExperiments[e]}isPendingExperimentResolution(e){return void 0!==this._pendingExperimentsFeatureFlags[e]}async getFeaturesFromExperiments(){return await this.initialized(),this._featuresFromExperiments}_getEnvValue(e){if(void 0!==e){if(!this._initializedEnv)throw new Error("Checking environmental config can only be done after appConfig.initialized()");return void 0!==e.envOverrides[this._initializedEnv]?e.envOverrides[this._initializedEnv]:e.default}}_getSettingValue(e){if(!this._initialized)throw new Error("Checking setting config can only be done after appConfig.initialize(..)");if(void 0!==this._settingOverrides[e])return this._settingOverrides[e];const t=this._getEnvValue(this._compiledAppConfig.envSettings[e]);if(void 0!==t)return t;const s=this._compiledAppConfig.settingValues[e];if(void 0!==s)return s;throw new Error("Static config not found: "+e)}_getBrowserFlag(e){if("boolean"==typeof this._browserFlags[e])return this._browserFlags[e]}async _getBrowserFlags(){return await this.initialized(),this._browserFlags}_getFeatureEnabled(e,t){if(!this._initialized)throw new Error("Checking feature config can only be done after appConfig.initialize(..)");if("boolean"==typeof this._browserFlags[e])return this._browserFlags[e];const s=t();return"boolean"==typeof s?s:"boolean"==typeof this._featureOverrides[e]?this._featureOverrides[e]:Boolean(this._compiledAppConfig.featureValues[e])}initializeWithDataTransfer(e,t){this.sessionId=t.sessionId,t.ENABLED_DRAFT_FEATURE_FLAGS&&t.ENABLED_DRAFT_FEATURE_FLAGS.forEach((e=>{n.Vd.has(e)||n.Vd.add(e)})),this.initialize(t.buildInfo,e,t.compiledConfig,t.releasePlaneConfig,t.browserFlags,void 0,!1)}async initialize(e,t,s,i,r,o,n=!0){this._initialized?console.warn("AppConfig is already initialized, not doing anything"):(this.attach(d.q),this.buildInfo=e,this._host=t,void 0!==r?(this._browserFlags=r,this._initResolveBrowserFlags(this._browserFlags)):this._initBrowserFlags(),this._compiledAppConfig=s,this._featuresFromExperiments=o||{},this._pendingExperimentsFeatureFlags=Object.assign({},this._featuresFromExperiments),this._setStaticFeatureOverrides(i.features),this._setStaticSettingOverrides(i.settings),await this.initialized(),n&&this._scheduleDynamicConfigSync())}_scheduleDynamicConfigSync(){""!==d.q.rrBuildSha.value&&(this._rrsDynamicConfig=new l.J(this._host,this.sessionId),this._rrsDynamicConfig.initAndScheduleSyncIfNeeded())}async initialized(){await Promise.all([this._initPromiseBrowserFlags,this._initPromiseFeatureOverrides,this._initPromiseSettingOverrides]),this._initialized=!0}updateFeaturesFromExperiments(e){let t={};for(const s of Object.keys(e))void 0!==this._featuresFromExperiments[s]&&(t={[s]:{oldValue:this._featuresFromExperiments[s]||!1,newValue:e[s]}},this._featureOverrides[s]=e[s],this._updateListeners[s]&&this._updateListeners[s](t),delete this._pendingExperimentsFeatureFlags[s])}resolvePendingExperimentFeatureFlags(){for(const e in this._pendingExperimentsFeatureFlags)this._resolvePendingFeatureFlag(e)}_resolvePendingFeatureFlag(e){if(void 0===this._pendingExperimentsFeatureFlags[e])return;const t={[e]:{oldValue:this._pendingExperimentsFeatureFlags[e],newValue:this._pendingExperimentsFeatureFlags[e]}};this._featureOverrides[e]=this._pendingExperimentsFeatureFlags[e],this._updateListeners[e]&&this._updateListeners[e](t),delete this._pendingExperimentsFeatureFlags[e]}async getHost(){return this._initPromiseSettingOverrides.then((()=>this._host))}async getEnabledFeaturesFromFloodgate(e){return void 0===this._floodgateConnector&&(this._floodgateConnector=new a.L(this)),this._floodgateConnector.getEnabledFeatures(e)}async syncWithFloodgate(){return await this.initialized(),c.Y.getInstance(this).syncNow()}setFactoryForAccessTokenProvider(e){this._atpFactoryResolver(e)}async getAccessTokenProvider(){return(await this._atpFactoryPromise)()}async attach(e){for(const t of Object.keys(e))e[t].attach(this);return this.initialized()}get _environment(){if(!this._initializedEnv)throw new Error("appConfig._environment can only be checked synchronously after awaiting appConfig.initialize()");return this._initializedEnv}_setStaticSettingOverrides(e){let t;if("string"!=typeof e.env)throw new Error("Invalid AppConfig settings override does not include required 'env'.");if(t=e.env,!Object.keys(r.b).includes(t))throw new Error(`Invalid AppConfig settings override.  Unsupported 'env' value provided = ${t}`);if(this._initializedEnv=t,"string"!=typeof e.envName)throw new Error("Invalid AppConfig settings override does not include required 'envName'.");for(const t of Object.keys(e))this._settingOverrides[t]=e[t];this._initResolveSettingOverrides(this._settingOverrides)}async getSettings(){await this.initialized();const e={};for(const t of Object.keys(this._compiledAppConfig.settingValues))e[t]=this._compiledAppConfig.settingValues[t];for(const t of Object.keys(this._compiledAppConfig.envSettings)){const s=this._getEnvValue(this._compiledAppConfig.envSettings[t]);void 0!==s&&(e[t]=s)}for(const t of Object.keys(this._settingOverrides))e[t]=this._settingOverrides[t];return e}async hasDraftFeature(e){return(await this._getBrowserFlags())[e]??n.Vd.has(e)}async getFeatures(e=!0){await this.initialized();const t={};for(const e of Object.keys(this._compiledAppConfig.featureValues))t[e]=this._compiledAppConfig.featureValues[e];for(const e of Object.keys(this._featureOverrides))t[e]=this._featureOverrides[e];for(const e of Object.keys(this._browserFlags))t[e]=this._browserFlags[e];if(!1===e)return t;for(const e of this._compiledAppConfig.draftDocModelFeatureNames)t[e]&&!this._browserFlags[e]&&(t[e]=!1),n.Vd.has(e)&&(t[e]=!0);return t}async getWorkerDataTransfer(){await this.initialized();return{sessionId:this.sessionId,buildInfo:JSON.parse(JSON.stringify(this.buildInfo)),compiledConfig:this._compiledAppConfig,releasePlaneConfig:{settings:this._settingOverrides,features:this._featureOverrides},browserFlags:this._browserFlags,ENABLED_DRAFT_FEATURE_FLAGS:n.Vd}}_setStaticFeatureOverrides(e){for(const t of Object.keys(e))this._featureOverrides[t]=e[t];this._initResolveFeatureOverrides(this._featureOverrides)}async hasFeature(e){const t=await this.getFeatures();return Boolean(t[e])}async _resetBrowserFlags(){const e=(await this.getHost()).sessionStorage();e?e.removeItem("_hz_browser_flags"):console.info("sessionStorage is required to use _resetBrowserFlags")}async _setBrowserFlag(e,t){const s=(await this.getHost()).sessionStorage();if(!s)return void console.info("sessionStorage is required to use _setBrowserFlag");let i={};const r=s.getItem("_hz_browser_flags");r&&(i=JSON.parse(r)),i[e]=t,this._resolvePendingFeatureFlag(e),s.setItem("_hz_browser_flags",JSON.stringify(i)),console.info("Success - flag set locally in this browser.")}async enableAllFeatureFlags(){const e=(await this.getHost()).sessionStorage();if(!e)return void console.info("sessionStorage is required to use enableAllFeatureFlags");const t={},s=await this.getFeatures(!1);for(const e of Object.keys(s))t[e]=!0;e.setItem("_hz_browser_flags",JSON.stringify(t)),console.info("Success - all flags set locally in this browser.")}getFloodgateKeyOrName(e){if(!this._initialized)throw new Error("Checking feature values can only be done after appConfig.initialize(..)");return this._compiledAppConfig.floodgateFeatureNames[e]??void 0}_initBrowserFlags(e){if(void 0===e)try{const e=this._host.sessionStorage();if(void 0===e)return this._browserFlags={},void this._initResolveBrowserFlags(this._browserFlags);const t=e.getItem("_hz_browser_flags");if(null==t)return this._browserFlags={},void this._initResolveBrowserFlags(this._browserFlags);const s=JSON.parse(t);for(const e of Object.keys(s))console.info("Found BrowserFlag["+e+"] = "+s[e]),this._browserFlags[e]=s[e];this._initResolveBrowserFlags(this._browserFlags)}catch(e){console.warn("AppConfig failed to retrieve browser flags",e),this._browserFlags={},this._initResolveBrowserFlags(this._browserFlags)}else this._browserFlags=e}async getAppDraftModelFlags(){await this.initialized();const e=this._browserFlags;return n.t3.filter((t=>e[t]??n.Vd.has(t)))}async adoptDraftModelFlags(e){const t=(await this.getHost()).sessionStorage();if(!t)return!1;const s={...this._browserFlags};for(const t of e)s[t]=!0;const i=await this.getAppDraftModelFlags();for(const t of i)e.includes(t)||(s[t]=!1);const r=JSON.stringify(s);return t.setItem("_hz_browser_flags",r),!0}async getCurrentBuildState(){return await this.initialized(),void 0===this._rrsDynamicConfig?o.C.unknown:this._rrsDynamicConfig.getBuildState(d.q.rrBuildSha.value)}}},231474:(e,t,s)=>{s.d(t,{J:()=>n});var i=s(647167),r=s(393299),o=s(531192);class n{constructor(e,t){if(this._setConfiguration=async()=>{try{this._rrsDynamicConfig=await this._rrApiClient.getConfiguration()}catch(e){console.error("Error while syncing dynamic config",e)}},this._initializedPromise=new Promise((e=>{this._initializedPromiseResolver=e})),""===o.q.rrBuildSha.value)return console.info("No build sha provided. Skipping heartbeat initialization."),void this._initializedPromiseResolver();this._host=e,this._sessionId=t,this._rrApiClient=new i.V({rrEntryName:o.q.rrEntryName.value,rrEntryConfigName:o.q.rrEntryConfigName.value,rrTrafficTargetName:o.q.rrTrafficTargetName.value,rrBuildSha:o.q.rrBuildSha.value,host:this._host,sessionId:this._sessionId})}async getDynamicConfig(){return await this._initializedPromise,this._rrsDynamicConfig}async initAndScheduleSyncIfNeeded(){""!==o.q.rrBuildSha.value?(await this._setConfiguration(),this._initializedPromiseResolver(),this._scheduleDynamicConfigSync()):this._initializedPromiseResolver()}async getBuildState(e){return await this._initializedPromise,void 0===this._rrsDynamicConfig||void 0===this._rrsDynamicConfig.builds?r.C.unknown:void 0===this._rrsDynamicConfig.builds[e]?r.C.avoid:this._rrsDynamicConfig.builds[e].state}_scheduleDynamicConfigSync(){setInterval(this._setConfiguration,60*o.q.rrConfigSyncInterval.value*1e3)}}},988543:(e,t,s)=>{s.d(t,{NE:()=>o,NK:()=>n,pE:()=>r});class i{constructor(e){this.name=e.name,this._appConfigPromise=new Promise(((e,t)=>{this._appConfigResolver=e}))}attach(e){this._appConfig=e,this._appConfigResolver(e)}get value(){if(!this._appConfig)throw new Error("Setting not attached to appConfig: "+this.name);return this._appConfig._getSettingValue(this.name)}async initialized(){await this._appConfigPromise}}class r extends i{constructor(e,t){super({name:e,valueDefault:t})}}class o extends i{constructor(e,t,s){super({name:e,valueDefault:t,envOverrides:s})}}class n extends i{constructor(e){super({name:e})}}},440552:(e,t,s)=>{s.d(t,{L:()=>r});var i=s(531192);class r{constructor(e){this._appConfig=e,this._appConfig.attach(i.q),this._initPromise=this._init()}async getEnabledFeatures(e){return await this._initPromise,this._getAllEnabledFeatures(e)}async _init(){this._host=await this._appConfig.getHost(),this._apiKey=i.q.floodgateApiKey.value,this._clientId=i.q.floodgateClientId.value,this._featuresUrl=i.q.floodgateFeaturesUrl.value}async _getAllEnabledFeatures(e){try{const t=await this._callFeaturesApi(e);return this._extractFeaturesFromApiResponse(t)}catch(e){return console.warn("Caught error while trying to obtain FloodGate features",e),{}}}_extractFeaturesFromApiResponse(e){if(void 0===e.releases)return{};const t={};return e.releases.forEach((e=>{e.features.forEach((e=>t[e]=!0))})),t}async _callFeaturesApi(e){const t=this._getFeaturesUrl(),s=await this._getRequestHeaders(e),i=await this._host.fetch(t,{method:"GET",headers:s});return await i.json()}_getFeaturesUrl(){return`${this._featuresUrl}?clientId=${this._clientId}`}async _getRequestHeaders(e){const t={"x-api-key":this._apiKey,"Content-Type":"application/json"};return void 0!==e&&(t.Authorization=`Bearer ${e}`),t}}},750469:(e,t,s)=>{s.d(t,{Y:()=>r});var i=s(440552);class r{constructor(e){this._resyncScheduled=!1,this._updateListeners={},this._appConfig=e,this._initFloodgatePromise=new Promise(((e,t)=>{this._resolveFloodgateFeatures=e})),this._floodgateConnector=this._createFloodgateConnector(),this._initEnabledFeatures()}static getInstance(e){return void 0===r._instance&&(r._instance=new r(e)),r._instance}_createFloodgateConnector(){return new i.L(this._appConfig)}async syncNow(){return void 0===this._onDemandSyncPromise&&(this._onDemandSyncPromise=new Promise(((e,t)=>{setTimeout((async()=>{try{await this._resyncFeatures(!1),e()}catch(e){t(e)}finally{this._onDemandSyncPromise=void 0}}))}))),this._onDemandSyncPromise}async getFeatureState(e){return(await this._initFloodgatePromise)[e]??!1}registerForUpdates(e,t){if(!0!==e.dynamic)throw new Error(`Cannot register feature "${e.name}" for updates because it is not dynamic.`);this._updateListeners[e.name]=t,this._resyncScheduled||this._scheduleResync()}async _initEnabledFeatures(){const e=await this._getAccessToken(),t=await this._floodgateConnector.getEnabledFeatures(e);this._resolveFloodgateFeatures(t)}async _resyncFeatures(e=!0){const t=await this._getAccessToken();void 0===t&&console.warn("AppConfig: Floodgate API will be called without an access token.");const s=await this._floodgateConnector.getEnabledFeatures(t);for(const e of Object.keys(this._updateListeners)){const t=s[e]??!1;try{this._updateListeners[e](t)}catch(s){console.warn(`An error was caught when trying to update feature "${e}" with state "${t}":`,s)}}e&&this._scheduleResync()}_scheduleResync(){setTimeout((async()=>{this._resyncFeatures()}),r.RESYNC_INTERVAL),this._resyncScheduled=!0}async _getAccessToken(e=5e3){const t=new Promise(((t,s)=>{setTimeout((()=>t(void 0)),e)})),s=await Promise.race([t,this._appConfig.getAccessTokenProvider()]);if(void 0!==s)return console.info("AppConfig: Got IMS access token provider"),s.getAccessTokenValue();console.warn(`AppConfig: No IMS access token provider received in ${e} ms`)}}r.RESYNC_INTERVAL=3e5},746820:(e,t,s)=>{s.d(t,{A9:()=>o,eW:()=>i,st:()=>a,su:()=>r,xn:()=>n});var i=(e=>(e.default="default",e.noStore="no-store",e.reload="reload",e.noCache="no-cache",e.forceCache="force-cache",e.onlyIfCached="only-if-cached",e))(i||{}),r=(e=>(e.omit="omit",e.sameOrigin="same-origin",e.include="include",e))(r||{}),o=(e=>(e.follow="follow",e.error="error",e.manual="manual",e))(o||{}),n=(e=>(e.noReferrer="no-referrer",e.noReferrerWhenDowngrade="no-referrer-when-downgrade",e.origin="origin",e.originWhenCrossOrigin="origin-when-cross-origin",e.sameOrigin="same-origin",e.strictOrigin="strict-origin",e.strictOriginWhenCrossOrigin="strict-origin-when-cross-origin",e.unsafeURL="unsafe-url",e))(n||{}),a=(e=>(e[e.Browser=0]="Browser",e[e.Node=1]="Node",e[e.Worker=2]="Worker",e))(a||{})},926473:(e,t,s)=>{s.d(t,{f:()=>Q});var i=s(746820),r=s(993308),o=s(279876),n=s(402820);const a=/access_token=[0-9A-Za-z-._%&=]+/,c=r.CA.EVENT_SOURCE_PLATFORM,d=r.CA.PLATFORM_TYPE,l=r.CA.EVENT_SOURCE_OS_VERSION,h=r.CA.USER_BROWSER_INFO,u=r.CA.EVENT_USER_AGENT,_=r.CA.EVENT_THREAD,g=r.CA.EVENT_ENVIRONMENT,f=r.CA.EVENT_ENVIRONMENT_TYPE,p=r.CA.MOBILE_ID,E=r.CA.MOBILE_INSTALL_DATE,m=r.CA.DEVICE_NAME,v=r.CA.EVENT_BUILD,y=r.CA.EVENT_BUILD_BRANCH,w=r.CA.EVENT_SOURCE_CLIENT_ID,C=r.CA.EVENT_SOURCE_NAME,A=r.CA.EVENT_SOURCE_VERSION,S=r.CA.EVENT_REFERRER,b=r.CA.EVENT_URL,I=r.CA.EVENT_LOCALE,T=r.CA.DISPLAYED_LANGUAGE,P=r.CA.EVENT_COUNTRY_CODE,R=r.CA.EVENT_COUNTRY_NAME,O=r.CA.PROFILE_COUNTRY,F=r.CA.ACCESS_COUNTRY,N=r.CA.SUBSCRIPTION_STATUS,k=r.CA.EVENT_SESSION_ID,L=r.CA.IS_NEW_USER,D=r.CA.EVENT_MCID_GUID,U=r.CA.SESSION_RECORDING_URL,x=r.CA.EVENT_CONTEXT_GUID,B=r.CA.EVENT_USER_GUID,M=r.CA.EVENT_PROFILE_GUID,V=r.CA.USER_SERVICE_CODE,z=r.CA.USER_SERVICE_LEVEL,j=r.CA.USER_ACCOUNT_TYPE,q=r.CA.IS_EDU_USER,G=r.CA.EVENT_GUID,H=r.CA.EVENT_CATEGORY,W=r.CA.CONTEXT_USER_ROLE,$=r.CA.CONTEXT_SPACES_ID,K=r.CA.CONTEXT_GUID,Y=r.CA.CONTENT_SCHEMA_VERSION,X=r.CA.EXPERIMENTS_ASSIGNED,J=[u,v,y,K,S,b,I,P,R,F,O,N,f,g,D,U,k,B,j,L,q,X,V,z,w,d,h],Z=[d,m,l,p,E];class Q{constructor(e,t,s,i,r){this._initTimeout=setTimeout((()=>{}),3e3),this._accessCountryPromise=new Promise(((e,t)=>{this._resolveAccessCountry=()=>{this._resolveAccessCountry=void 0,e()}})),this._IMSUserData=new Promise(((e,t)=>{this._resolveIMSUserData=()=>{this._resolveIMSUserData=void 0,e()}})),this._IMSIdData=new Promise(((e,t)=>{this._resolveIMSIdData=()=>{this._resolveIMSIdData=void 0,e()}})),this._initialized=!1,this._data={},this._listeners=[],this._hostPromise=e,this._configPromise=s,this._alloyService=i,this._locationPromise=r,this._data[k]=t,this._data[F]="XX",this.assignedExperiments="";const o=[this._hostPromise,this._configPromise,this._initDeviceContext(),this._initMcidGuidContext(),this._initLocationContext(),this._initAppContext(),this._initPageContext(),this._initAccessCountry(),this._initIMSUserData(),this._initIMSIdData(),this._locationPromise],n=Promise.all(o);this._initPromise=Promise.race([n,this._initTimeout]),this._initDocContext()}async _initAccessCountry(){await this._accessCountryPromise}async _initIMSUserData(){await this._IMSUserData}async _initIMSIdData(){await this._IMSIdData}async _initDeviceContext(){const e=await this._hostPromise,t=e.deviceAgent();switch(this._data[u]=t,e.executionEnvironment()){case i.st.Browser:{this._data[c]="browser",this._data[_]="main";const e=t.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);e?(this._data[c]=e[0],!1===(0,o.e)(i.st.Browser)&&(this._data[d]="mobile-web")):this._data[d]="desktop-web",this._data[l]="Web";break}case i.st.Node:this._data[c]="nodejs",this._data[_]="main",this._data[l]="Server";break;case i.st.Worker:this._data[c]="browser",this._data[_]="worker-thread",this._data[l]="Web"}}async _initAppContext(){const e=await this._configPromise;this._data[v]=`${e.includeIngestBuildPrefix?"prod"===e.envName?"prod:":"stage:":""}${e.buildInfo.sha}`,this._data[y]=e.buildInfo.branch,this._data[H]=e.ingestAppCategory,this._data[g]=e.envName,this._data[f]=e.env,this._data[C]=e.appSAPCode,this._data[A]=e.appVersion}async _initPageContext(){if((await this._hostPromise).executionEnvironment()===i.st.Browser){const e=this._documentHref();this._data[b]=e.replace(a,""),this._data[S]=document.referrer}}_documentHref(){return document.location.href}async _initMcidGuidContext(){const e=await this._hostPromise,t=e.deviceLanguage();this._data[I]=t;const s=(await this._configPromise).useExperienceEdge;e.executionEnvironment()===i.st.Browser&&s&&(this.mcidGuid=await this._alloyService.mcidGuid())}async _initLocationContext(){const e=await this._locationPromise;this._data[P]=e.countryCode,this._data[R]=e.countryName}_setAndResolveAccessCountry(e){this._data[F]=e,this._broadcastUpdate([F]),this._resolveAccessCountry&&this._resolveAccessCountry()}async extractAccessCountry(){if((await this._hostPromise).executionEnvironment()===i.st.Browser){const e=sessionStorage.getItem("feds_location");if(e)try{const t=JSON.parse(e),s=String(t.country);this._setAndResolveAccessCountry(s)}catch(e){sessionStorage.clearItem("feds_location"),console.error("Failed to parse feds_location data from sessionStorage ",e)}else window?.adobePrivacy?.loadOneTrust().then((()=>{const e=window?.OneTrust?.getGeolocationData();if(e){const t=String(e.country);sessionStorage.setItem("feds_location",JSON.stringify(e)),this._setAndResolveAccessCountry(t)}else console.warn("Failed to get location data from OneTrust")})).catch((e=>{console.error("Failed to load OneTrust ",e)}))}}_initDocContext(){this._data[K]="",this._data[Y]="",this._data[W]=""}async initialized(){this._initialized||(await this._initPromise,clearTimeout(this._initTimeout),this._initialized=!0)}updateShellAppContext(e){e&&0!==Object.keys(e).length&&!0===(0,o.e)(i.st.Browser)&&(this.updateFromPayload(e),this._broadcastUpdate(Object.keys(e)))}adornEventData(e){Object.keys(this._data).forEach((t=>{e[t]||(e[t]=this._data[t])})),e[G]=e[G]||(0,n.Z)(),!e[K]&&this.currentAssetId&&(e[K]=this.currentAssetId),e[r.CA.EVENT_TIME_START]||(e[r.CA.EVENT_TIME_START]=(new Date).toISOString()),e[r.CA.EVENT_COUNT]||e[r.CA.EVENT_WORKFLOW]===r.kC.WORKFLOW_DEBUG||(e[r.CA.EVENT_COUNT]=1)}addListener(e){this._listeners.push(e)}_callListeners(e){this._listeners.forEach((t=>{t(e)}))}generateInitPayload(){const e=Object.values(r.eN).filter((e=>Boolean(this._data[e]))),t=[...J,...e];if(!0===(0,o.e)(i.st.Browser)){const e=Object.values(Z).filter((e=>Boolean(this._data[e])));t.push(...e)}return this._generatePayload(t)}_generatePayload(e){const t={};return e.forEach((e=>{t[e]=this._data[e]})),t}_broadcastUpdate(e){this._callListeners(this._generatePayload(e))}async updateFromPayload(e){await this.initialized();Object.keys(e).forEach((t=>{this._data[t]=e[t]}))}addContextGUID(e){this._data[x]=e}removeContextGUID(){delete this._data[x]}set imsProfile(e){const t=e.account_type,s=[];let i;if(this._data[B]=String(e.userId),this._data[j]=String(t),e.profileId&&(this._data[M]=String(e.profileId),s.push(M)),e.countryCode&&(this._data[O]=String(e.countryCode),s.push(O)),e.serviceAccounts&&(i=e.serviceAccounts.find((e=>"creative_cloud"===e.serviceCode))),this._data[z]=i?i.serviceLevel:"",this._data[V]=i?i.serviceCode:"",e.email){const t=e.email.toLowerCase();(t.endsWith("@adobe.com")||t.endsWith("@adobetest.com"))&&(this._data[V]+="_adobe")}this._broadcastUpdate([B,j,z,V,...s]),this._resolveIMSUserData&&this._resolveIMSUserData()}set imsIdData(e){const t=e.client_id||"no-client-id";this._data[w]=t,this._broadcastUpdate([w]),this._resolveIMSIdData&&this._resolveIMSIdData()}get isInternalUser(){return String(this._data[V]).endsWith("_adobe")}set accessCountry(e){this._setAndResolveAccessCountry(e)}get accessCountry(){return this._data[F]}set threadName(e){this._data[_]=e}get threadName(){return this._data[_]}get deviceName(){return this._data[c]}set mcidGuid(e){this._data[D]=e,this._broadcastUpdate([D])}get mcidGuid(){return this._data[D]}set subscriptionStatus(e){this._data[N]=e,this._broadcastUpdate([N])}get subscriptionStatus(){return this._data[N]}set sessionRecordingUrl(e){this._data[U]=e,this._broadcastUpdate([U])}get sessionRecordingUrl(){return this._data[U]}set sessionId(e){this._data[k]=e,this._broadcastUpdate([k])}get sessionId(){return this._data[k]}get newUserStatus(){return this._data[L]}set newUserStatus(e){this._data[L]=e,this._broadcastUpdate([L])}get eduUserStatus(){return this._data[q]}set eduUserStatus(e){this._data[q]=e,this._broadcastUpdate([q])}get displayedLanguage(){return this._data[T]}set displayedLanguage(e){this._data[T]=e,this._broadcastUpdate([T])}set userHasEditRights(e){this._data[W]=e?"editor":"viewer",this._broadcastUpdate([W])}set currentAssetId(e){this._data[K]=e,this._broadcastUpdate([K])}set currentDocSpacesId(e){this._data[$]=e,this._broadcastUpdate([$])}set currentDocumentVersion(e){this._data[Y]=e,this._broadcastUpdate([Y])}set assignedExperiments(e){this._data[X]=e,this._broadcastUpdate([X])}get osVersion(){return this._data[l]}get appVersion(){return this._data[A]}get appName(){return this._data[C]}get userId(){return this._data[B]}get browserInfo(){return this._data[h]}set browserInfo(e){this._data[h]=e,this._broadcastUpdate([h])}addCampaignProperties(e){if(e&&Object.keys(e).length>0)for(const t in e)this._data[t]=e[t]}}},34190:(e,t,s)=>{s.d(t,{h:()=>a});var i=s(746820),r=s(790176),o=s(279876);const n=["adobePrivacy:PrivacyConsent","adobePrivacy:PrivacyCustom","adobePrivacy:PrivacyReject"];class a{constructor(e,t){this._onLoadHandler=()=>{if(!this._loadPromise?.isSettled)if(window.adobePrivacy)this._loadPromise?.resolve();else{const e="PrivacyService:window.adobePrivacy is not available after load event.";console.error(e),this._loadPromise?.reject(e)}},this._hostConfigPromises=Promise.all([e,t]).then((([e,t])=>{this._config=t,this._host=e}))}addConsentChangeListener(e){this.load().then((()=>{if((0,o.e)(i.st.Browser))return Promise.resolve();this._host.executionEnvironment()===i.st.Browser&&(this._addPrivacyListener(e),e())}))}_addPrivacyListener(e,t=!1){const s=t?()=>{e(),n.forEach((e=>{window.removeEventListener(e,s)}))}:e;n.forEach((e=>{window.addEventListener(e,s)}))}_registerLoadListeners(){this._addPrivacyListener(this._onLoadHandler.bind(this),!0)}_registerConfigs(){const{otDomainId:e,footerLinkSelector:t,documentLanguage:s}=this._config,i={otDomainId:e};t&&(i.footerLinkSelector=t),s&&(i.documentLanguage=s),window.fedsConfig=window.fedsConfig||{privacy:i}}async _loadPrivacy(){if(await this._hostConfigPromises,this._host.executionEnvironment()===i.st.Browser){this._registerConfigs(),this._registerLoadListeners();const e=document.createElement("script");e.src=this._config.privacyUrl,e.async=!0,e.addEventListener("error",(()=>{const e="PrivacyService: Failed to load";console.error(e),!this._loadPromise?.isSettled&&this._loadPromise?.reject(e)})),document.head.appendChild(e)}else!this._loadPromise?.isSettled&&this._loadPromise?.resolve()}async load(){return this._loadPromise?this._loadPromise.promise:(this._loadPromise=new r.B,(0,o.e)(i.st.Browser)||this._loadPrivacy().catch((e=>{const t="PrivacyService: Failed to load";console.error(t,e),!this._loadPromise?.isSettled&&this._loadPromise?.reject(t)})),this._loadPromise?.promise)}resolvePrivacyLoadInNativeAppShell(){this._loadPromise?.resolve()}}},279876:(e,t,s)=>{s.d(t,{e:()=>r});var i=s(746820);function r(e){if(e===i.st.Browser)return"undefined"!=typeof window&&Boolean(window.webkit?.messageHandlers?.hzMobile?.postMessage)||"undefined"!=typeof window&&Boolean(window.hzMobile?.postMessage)}},113826:(e,t,s)=>{s.d(t,{G:()=>o});var i=s(746820),r=s(993308);class o{constructor(e,t){this.sendEvent=this.sendEvent.bind(this),this.mcidGuid=this.mcidGuid.bind(this),this._isInitialized=!1,this._initPromise=Promise.all([e,t]).then((([e,t])=>{this._host=e,this._config=t}))}async _initialized(){try{await this._initPromise;if(this._config.useExperienceEdge&&this._host.executionEnvironment()===i.st.Browser){const e=await Promise.all([s.e(61988),s.e(80896)]).then(s.bind(s,801225));this._alloy=e.createInstance({name:"_alloy"}),this._alloy("configure",{clickCollectionEnabled:!1,edgeConfigId:this._config.aepConfigId,orgId:this._config.aepOrgId,debugEnabled:!1,edgeDomain:"sstats.adobe.com"})}this._isInitialized=!0}catch(e){console.error("Failed to initialized alloy",e)}}_generatePayload(e){return{eventType:"web.webinteraction.linkClicks",xdm:{web:{webPageDetails:{isErrorPage:!1,isHomePage:!1,name:window.location.host,server:window.location.href,siteSection:window.location.href},webReferrer:{URL:e[r.CA.EVENT_REFERRER]||""},webInteraction:{name:e[r.CA.EVENT_PAGENAME]||"",linkClicks:{value:1},type:"other"}}},data:{_adobe_corpnew:{digitalData:{},sdm:this._unflatten(e)},marketingtech:{adobe:{alloy:{approach:"optimized",edgeConfigId:this._config.aepConfigId}}}}}}_setProp(e,t,s){const i=t.indexOf("."),r=t.substring(0,i),o=t.substring(i+1);e[r]=e[r]||{};const n=e[r];o.includes(".")?this._setProp(n,o,s):n[o]=s}_unflatten(e){const t={};for(const s of Object.keys(e))s.includes(".")?this._setProp(t,s,e[s]):t[s]=e[s];return t}_sendEvent(e){this._alloy("sendEvent",e).catch((e=>{console.warn("AlloyService encountered an unexpected error sending events to AEP",e)}))}sendEvent(e){const t=this._generatePayload(e);this._isInitialized?this._sendEvent(t):this._initialized().then((()=>{this._sendEvent(t)}))}async mcidGuid(){this._isInitialized||await this._initialized();try{return(await this._alloy("getIdentity")).identity?.ECID??r.J6}catch(e){return console.warn("Could not get ECID. Mostly adBlocker is blocking calls to AEP",e),r.J6}}}},636698:(e,t,s)=>{s.d(t,{vC:()=>l});var i=s(461027),r=s(790176),o=s(624451),n=s(446422),a=s(993308),c=s(614514);var d;!function(e){e[e.disabled=1]="disabled",e[e.savingEvents=2]="savingEvents",e[e.discardingEvents=3]="discardingEvents"}(d||(d={}));class l{constructor(e,t){this._isInitialized=!1,this._events=[],this._currentEventBufferingState=d.disabled,this._configPromise=t,this._ingestService=i.k.createInstance(e,t.then((e=>e.ingestConfig))),this._initializedPromise=this._processOnceInitialized()}async shutdown(){clearInterval(this._queueIntervalHandle),this._queueIntervalHandle=void 0,await this._processQueueAsync()}async _processOnceInitialized(){await this._ingestService.initialized();const e=await this._configPromise,t=e.ingestProcessingInterval;this._analyticsBufferLimit=e.analyticsBufferLimit,this._flushLocalBuffer(),this._isInitialized=!0,this._queueIntervalHandle=setInterval((()=>{this._processQueue()}),t),this._processQueue()}async initialized(){return this._initializedPromise}_isLogEventLowPriority(e){return!(!this._isLogEvent(e)||e[a.CA.LOG_LEVEL]===a.kC.LOG_LEVEL_ERROR)}_isLogEvent(e){return e[a.CA.EVENT_SUBTYPE]===a.kC.LOG&&e[a.CA.EVENT_WORKFLOW]===a.kC.DEBUG}queueEventData(e,t=!1){if(t)return this._events.push(e),void(this._isInitialized&&this._processQueue());if(this._events.length>=250){if(this._isLogEventLowPriority(e))return void console.warn("EventDataTransport overflow, dropping log event below error level.");{let e=!1;for(let t=0;t<this._events.length;t++)if(this._isLogEventLowPriority(this._events[t])){e=!0,this._events.splice(t,1),console.warn("EventDataTransport overflow, dropping log event below error level.");break}e||(console.error("EventDataTransport overflow, dropping important event."),this._events.shift())}}this._events.push(e),this._isInitialized&&this._events.length>=20&&this._processQueue()}async _sendEventsFromBuffer(){const e=await this.localBuffer.pop(10);e.length>0&&e.forEach((e=>{this.queueEventData(e)}))}async _flushLocalBuffer(){await this.localBuffer.getCount()>0&&this._sendEventsFromBuffer()}get localBuffer(){return void 0===this._eventsBuffer&&async function(e){e._eventsBuffer=c.k.newTransportBuffer(n.R.defaultInstance.context),await e._eventsBuffer.init()}(this),this._eventsBuffer}_changeCurrentEventBufferingStateIfNeeded(e){e!==this._currentEventBufferingState&&(this._currentEventBufferingState=e)}async _bufferEventData(e){0!==e.length&&(this._currentEventBufferingState===d.discardingEvents?await this._discardEvents(e):await this._saveEvents(e))}async _discardEvents(e){const t=e.filter((e=>e[a.CA.EVENT_PAGENAME]===a.iv.SET_ANALYTICS_BUFFER_STATE));t.length>0&&await this.localBuffer.putAll(t)}async _saveEvents(e){const t=e.filter((e=>e[a.CA.EVENT_PAGENAME]!==a.iv.SET_ANALYTICS_BUFFER_STATE)),s=e.filter((e=>e[a.CA.EVENT_PAGENAME]===a.iv.SET_ANALYTICS_BUFFER_STATE)),i=await this.localBuffer.getCount(),r=this._analyticsBufferLimit-i;if(r<=0)this._changeCurrentEventBufferingStateIfNeeded(d.discardingEvents),await this.localBuffer.putAll(s);else{this._changeCurrentEventBufferingStateIfNeeded(d.savingEvents);(t.length>r?t.length-r:0)>0&&this._changeCurrentEventBufferingStateIfNeeded(d.discardingEvents),await this.localBuffer.putAll([...s,...t.slice(0,r)])}}async _processQueueAsync(){if(this._queueIsSending)return this._queueIsSending.promise;if(!this._events.length)return;this._queueIsSending=new r.B;const e={maxAttempts:3,shouldRetry:e=>!(e instanceof i.o&&!1===e.retryable)};do{const t=(0,o.X)(this._ingestService.sendEventData,e),s=this._events.splice(0,Math.min(this._events.length,20));try{await t(s)}catch(e){console.warn("EventDataTransport encountered an unexpected error sending events to ingest",e);try{await this._bufferEventData(s)}catch(e){console.error("Analytics buffer encountered an unexpected when trying to save events locally",e)}}}while(this._events.length>0);this._changeCurrentEventBufferingStateIfNeeded(d.disabled),this._sendEventsFromBuffer(),this._queueIsSending.resolve(),this._queueIsSending=void 0}_processQueue(){this._queueIsSending||this._processQueueAsync()}}},621726:(e,t,s)=>{s.d(t,{P:()=>r});var i=s(906670);class r{constructor(e){this._config=e}async init(){const e=e=>{e.createObjectStore(this._config.datastoreName,{keyPath:"uid"}).createIndex("by-type","type")};try{this._db=await(0,i.X3)(this._config.databaseName,this._config.dbVersion,{upgrade:e})}catch(e){}}_serializeEvent(e){return{uid:e["event.guid"],...e}}async put(e){return await(this._db?.put(this._config.datastoreName,this._serializeEvent(e)))}async putAll(e){const t=this._db?.transaction(this._config.datastoreName,"readwrite");return Promise.all([...e.map((e=>{const s=this._serializeEvent(e);t?.store.put(s)})),t?.done])}async pop(e=1){let t;try{t=this._db?.transaction(this._config.datastoreName,"readwrite")}catch(e){return Promise.resolve([])}const s=[],i=t?.store;if(void 0===i)return Promise.resolve([]);let r=0,o=await i.openCursor();for(;o;){const{uid:i,...n}=o.value;if(s.push(n),t?.store.delete(i),++r===e)break;o=await o.continue()}return Promise.resolve(s)}getCount(){return this._db?.count(this._config.datastoreName)}clear(){return this._db?.clear(this._config.datastoreName)}}},461027:(e,t,s)=>{s.d(t,{k:()=>a,o:()=>n});var i=s(746820),r=s(993308),o=s(402820);class n extends Error{constructor(e){super(e),this.name="IngestAPIError",this.retryable=!0}}class a{constructor(e,t){this.sendEventData=this.sendEventData.bind(this),this._initPromise=Promise.all([t,e]).then((([e,t])=>{this._host=t,this._config=e,this._url=new URL("/ingest",this._config.ingestHost)}))}static createInstance(e,t){return new a(e,t)}async initialized(){await this._initPromise}_getHeaders(){return{"Content-Type":"application/json","x-api-key":this._config.ingestApiKey}}_adornSDMEvent(e){e[r.CA.EVENT_GUID]=e[r.CA.EVENT_GUID]||(0,o.Z)(),e[r.CA.EVENT_CATEGORY]=this._config.ingestAppCategory}_wrapSDMData(e){const t={};return t[r.CA.EVENT_PKG_INGEST_TYPE]=r.kC.INGEST_TYPE,e[r.CA.OVERRIDE_PKG_PROJECT]?(t[r.CA.EVENT_PKG_PROJECT]=e[r.CA.OVERRIDE_PKG_PROJECT],delete e[r.CA.OVERRIDE_PKG_PROJECT]):t[r.CA.EVENT_PKG_PROJECT]=this._config.ingestProject,t[r.CA.EVENT_PKG_TIME]=e[r.CA.EVENT_TIME_START]||(new Date).toISOString(),t[r.CA.EVENT_PKG_ENVIRONMENT]=this._config.envName,t[r.CA.EVENT_PKG_DATA]=e,t}sendEventData(e){const t={headers:this._getHeaders(),body:{events:[]}};for(const s of e)this._adornSDMEvent(s),t.body.events.push(this._wrapSDMData(s));if(0===t.body.events.length)return Promise.resolve();let s="";try{s=JSON.stringify(t.body)}catch(e){const t=new n("JSON parsing an Ingest event body failed!");return t.retryable=!1,Promise.reject(t)}return this._host.fetch(this._url.href,{method:"POST",keepalive:!0,cache:i.eW.default,credentials:i.su.omit,headers:t.headers,redirect:i.A9.follow,referrerPolicy:i.xn.noReferrer,body:s}).then((e=>{if(!e.ok)throw new n(`Network response was not ok: ${e.status}`)}))}}},106160:(e,t,s)=>{s.d(t,{a:()=>i});class i{init(){return Promise.resolve()}put(e){return Promise.resolve()}putAll(e){return Promise.resolve([])}pop(e){return Promise.resolve([])}getCount(){return Promise.resolve(0)}clear(){return Promise.resolve()}}},614514:(e,t,s)=>{s.d(t,{k:()=>o});var i=s(621726),r=s(106160);class o{static newTransportBuffer(e){const t=e.deviceName,s=e.threadName;let o;try{o="browser"===t?new i.P({databaseName:`AnalyticsEvents-${s}`,datastoreName:"main",dbVersion:1}):new r.a}catch(e){o=new r.a}return o}}},789254:(e,t,s)=>{s.d(t,{Yd:()=>_});var i,r=s(446422),o=s(993308),n=s(253624),a=s(262037),c=s(348349),d=s(441362);!function(e){e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.traceflow=5]="traceflow",e[e.none=6]="none"}(i||(i={}));const l={debug:"debug",info:"info",error:"failure",warn:"failure",traceflow:"debug"};var h;!function(e){e.EVENT_TYPE="event.type",e.EVENT_SUBTYPE="event.subtype",e.EVENT_SUBCATEGORY="event.subcategory",e.EVENT_WORKFLOW="event.workflow",e.TRACEFLOW_CATEGORY="custom.traceflow",e.TRACE_ID="custom.traceId",e.SPAN_ID="custom.spanId",e.LOG_MESSAGE="custom.message",e.LOG_LEVEL="custom.level",e.METADATA="custom.meta",e.ERROR_UUID="custom.errorUUID",e.ERROR_MESSAGE="custom.errorMessage",e.ERROR_CODE="custom.errorCode",e.ERROR_FULL_STACK="custom.fullStack",e.ERROR_FULL_MESSAGE_WITH_CODE="custom.fullMessageWithCode",e.ERROR_CATEGORY="custom.errorCategory",e.ERROR_IS_EXPECTED="custom.errorIsExpected",e.ERROR_LOG_METADATA="custom.errorLogMetadata"}(h||(h={}));const u=function(){};class _{constructor(e){this._consoleHijacked=!1,this._initialized=!1,this._analyticsClient=e,this._bufferDuringInit=[],this._enabledTraceflows={},this._consoleProcessedLogs=!1,this._sendToAnalyticsTransport=!1,this._consoleLogLevel=i.info,this._enabledLogLevel=i.info,this._initializedPromise=this._sendAfterInitialized()}static set traceflowOverrides(e){_._traceflowOverrides=e}static get traceflowOverrides(){return _._traceflowOverrides}static _captureConsole(){_._originalConsoles[i.traceflow]=console.log,_._originalConsoles[i.debug]=console.debug,_._originalConsoles[i.info]=console.info,_._originalConsoles[i.warn]=console.warn,_._originalConsoles[i.error]=console.error}static hijackConsole(e){_._singleton._consoleHijacked&&_._restoreConsole(),console.info("Logger taking over console"),e._consoleHijacked=!0,console.debug=(...t)=>e.debug(...t),console.log=(...t)=>e.info(...t),console.info=(...t)=>e.info(...t),console.warn=(...t)=>e.warn(...t),console.error=(...t)=>e.error(...t)}static _restoreConsole(){_._singleton._consoleHijacked&&(console.debug=_._originalConsoles[i.debug],console.info=_._originalConsoles[i.info],console.warn=_._originalConsoles[i.warn],console.error=_._originalConsoles[i.error],console.log=_._originalConsoles[i.traceflow],_._singleton._consoleHijacked=!1)}static singleton(){return _._singleton||(_._singleton=new _(r.R.defaultInstance),_._singleton._destroySingleton=()=>{_._restoreConsole(),delete _._singleton},_._captureConsole(),_.HijackConsole&&_.hijackConsole(_._singleton)),_._singleton}async _sendAfterInitialized(){const e=await this._analyticsClient.appConfig.getSettings(),t=await this._analyticsClient.appConfig.getFeatures();this._consoleProcessedLogs=Boolean(t["processed-logs-to-console"]),this._sendToAnalyticsTransport=Boolean(!t["suppress-logs-to-ingest"]),this._enabledTraceflows=t,this._enabledLogLevel=i[e.enabledLogLevel],this._consoleLogLevel=i[e.consoleLogLevel],this._initialized=!0;for(const e of this._bufferDuringInit)this._filteredPush(e);this._bufferDuringInit=[]}async shutdown(){await this._analyticsClient.shutdown(),_.singleton()._destroySingleton()}async initialized(){return this._initializedPromise}get(e){return new g(e,this._analyticsClient)}createRequestLogger(e){return new p(e,this._analyticsClient)}async createInitializeRequestLogger(e){const t=new p(e,this._analyticsClient);return await t.initialized(),t}_isErrorMeta(e){return"error"in e}_extractErrorMeta(e){if(this._isErrorMeta(e)){return e.error}return null}_processArgs(e,t){let s,r=t[0];"string"!=typeof r&&(t.length>1&&"string"==typeof t[1]?(r=t[1],t[1]=t[0],t[0]=r):(r="unknown-message",t.unshift(r)));let o,c=null;if(2===t.length)o=t[1],o instanceof n.R||o instanceof Error?(c=o,s={}):"object"==typeof o?(c=this._extractErrorMeta(o),s=(0,a.a1)(o)):s={unknown:(0,a.a1)(t[1])};else if(t.length>2){s=[];for(let e=1;e<t.length;e++)s.push((0,a.a1)(t[e]))}else s={};if(this._hasKnownMetaKeys(s)?this._normalizeMetaKeys(s):s={[h.METADATA]:s},c)if(c instanceof n.R){s[h.ERROR_UUID]=c.uuid,s[h.ERROR_MESSAGE]=c.message,s[h.ERROR_CODE]=c.code,s[h.ERROR_FULL_STACK]=c.fullStack.replace(/[\s]{2,}/g," "),s[h.ERROR_FULL_MESSAGE_WITH_CODE]=c.fullMessageWithCode,c.category&&(s[h.ERROR_CATEGORY]=c.category),c.isExpected&&(s[h.ERROR_IS_EXPECTED]=c.isExpected);const e=c.fullLogMetadata;e&&(s[h.ERROR_LOG_METADATA]=(0,a.a1)(e))}else{s[h.ERROR_MESSAGE]=c.toString();const e=c.stack||"Unknown";s[h.ERROR_FULL_STACK]=e.replace(/[\s]{2,}/g," ")}return{level:i[e],msg:r,meta:s}}_hasKnownMetaKeys(e){let t,s;if(e&&"object"==typeof e)for(const i of Object.keys(e))if(t=i.indexOf("."),t>0&&(s=i.substr(0,t),s in o.Hk))return!0;return!1}_normalizeMetaKeys(e){let t,s;for(const[i,r]of Object.entries(e))t=i.indexOf("."),t<0?(e["custom."+i]=r,delete e[i]):(s=i.substr(0,t),s in o.Hk||(e["custom."+i]=r,delete e[i]))}error(...e){if(!this._preprocessLoggerCall(i.error,e))return;const t=this._processArgs("error",e);this._filteredPush(t)}static error(...e){_.singleton().error(...e)}warn(...e){if(!this._preprocessLoggerCall(i.warn,e))return;const t=this._processArgs("warn",e);this._filteredPush(t)}static warn(...e){_.singleton().warn(...e)}info(...e){if(!this._preprocessLoggerCall(i.info,e))return;const t=this._processArgs("info",e);this._filteredPush(t)}static info(...e){_.singleton().info(...e)}debug(...e){if(!this._preprocessLoggerCall(i.debug,e))return;const t=this._processArgs("debug",e);this._filteredPush(t)}static debug(...e){_.singleton().debug(...e)}traceflow(e,...t){if(this.isTraceflowEnabled("console-"+e)||this.isTraceflowEnabled("console-all")){const s=[`[TRACEFLOW: ${e}]`].concat(t);this._mirrorOriginalConsole(i.info,s)}if(!this._prefilter(i.traceflow,e))return;const s=this._processArgs("traceflow",t);s.meta["custom.traceflow"]=e,this._filteredPush(s)}static traceflow(e,...t){_.singleton().traceflow(e,...t)}isTraceflowEnabled(e){return _.traceflowOverrides?!!_.traceflowOverrides["traceflow-all"]||Boolean(_.traceflowOverrides[`traceflow-${e}`]):!!this._initialized&&Boolean(this._enabledTraceflows[`traceflow-${e}`])}static isTraceflowEnabled(e){return _.singleton().isTraceflowEnabled(e)}_adornWithContext(e){const t=c.ZP.trace.getSpanContext(c.ZP.context.active());t&&(0,d.BM)(t)&&(e.meta[h.TRACE_ID]=t.traceId,e.meta[h.SPAN_ID]=t.spanId),e.meta[h.EVENT_TYPE]=l[i[e.level]],e.meta[h.EVENT_SUBTYPE]="log",e.meta[h.EVENT_WORKFLOW]=o.kC.WORKFLOW_DEBUG,e.meta[h.EVENT_SUBCATEGORY]||(e.meta[h.EVENT_SUBCATEGORY]="global")}_preprocessLoggerCall(e,t){return this._consoleLogLevel<=e&&this._mirrorOriginalConsole(e,t),this._prefilter(e,void 0)}_mirrorOriginalConsole(e,t){this._initialized?_._originalConsoles[e].apply(console,t):_._originalConsoles[e].apply(console,[JSON.stringify(t)])}_echoProcessedLogToConsole(e){_._originalConsoles[i.debug].apply(console,[JSON.stringify(e)])}_prefilter(e,t){return!this._initialized||this._filter(e,t)}_filter(e,t){return!(e===i.traceflow&&!this.isTraceflowEnabled(t))&&!(e<this._enabledLogLevel)}_filteredPush(e){this._initialized?this._filter(e.level,e.meta[h.TRACEFLOW_CATEGORY])&&(this._adornWithContext(e),this._pushLog(e)):this._bufferDuringInit&&(this._adornWithContext(e),this._bufferDuringInit.push(e))}_adornLogEventWithContext(e){this._analyticsClient.context.adornEventData(e.meta)}_pushLog(e){e.meta[h.LOG_MESSAGE]=e.msg,e.meta[h.LOG_LEVEL]=i[e.level],this._adornLogEventWithContext(e),this._consoleProcessedLogs&&this._echoProcessedLogToConsole(e),this._sendToAnalyticsTransport&&this._analyticsClient.userConsent&&this._analyticsClient.transport.queueEventData(e.meta)}}_._originalConsoles={[i.none]:u,[i.traceflow]:u,[i.debug]:u,[i.info]:u,[i.warn]:u,[i.error]:u},_.HijackConsole=!1;class g extends _{constructor(e,t){super(t),this._category=e}_categoryLog(e,t){if(!this._preprocessLoggerCall(i[e],[`[${this._category}]`,...t]))return;const s=this._processArgs(e,t);s.meta[h.EVENT_SUBCATEGORY]=this._category,this._filteredPush(s)}error(...e){this._categoryLog("error",e)}warn(...e){this._categoryLog("warn",e)}info(...e){this._categoryLog("info",e)}debug(...e){this._categoryLog("debug",e)}trace(...e){this.traceflow(this._category,...e)}}const f={sessionId:o.CA.EVENT_SESSION_ID,requestId:"custom.requestId",statusCode:"custom.statusCode",url:"custom.url",method:"custom.method",referrer:o.CA.EVENT_REFERRER,startTime:o.CA.EVENT_TIME_START,userId:o.CA.EVENT_USER_GUID,traceId:"custom.traceId"};class p extends _{constructor(e,t){super(t),this.requestContext=e}_adornLogEventWithContext(e){this._analyticsClient.context.adornEventData(e.meta);for(const[t,s]of Object.entries(this.requestContext))f[t]?e.meta[f[t]]=s:e.meta[t]=s}_mirrorOriginalConsole(e,t){const s=[this.requestContext].concat(t);return super._mirrorOriginalConsole(e,s)}}},444058:(e,t,s)=>{s.d(t,{MD:()=>y});var i=s(610656),r=s(601765),o=s(863326),n=s(647435),a=s(309244),c=s(838840),d=s(789254),l=s(624451),h=s(34871),u=s(213104),_=s(810663),g=s(228748),f=s(166315),p=s(112877),E=s(428463);const m=()=>{function e(e){let t,s=5e3;const i=e;if(i&&i.response&&i.response.headers&&(t=i.response.headers.get("Retry-After")),t){let i=Number.NaN;try{i=1e3*Number.parseFloat(t)}catch(t){d.Yd.info("Parsing the retryAfter header failed",t,e)}isNaN(i)||(s=i)}return s}return{maxAttempts:3,shouldRetry:e=>{let t=!1;const s=e;return s&&s.response&&s.response.headers&&(t=null!==s.response.headers.get("Retry-After")),t},affectDelayHook:t=>({type:l.Z.EXACT,value:e(t)}),returnFinalResponse:!0}},v=class{constructor(e,t,s,i){this._apiKey=e,this._accessToken=t,this._host=i,s&&s.attach(h.q)}async search(e){const t={...o.LU.makeStandardHeaders(e.useAuthHeader&&void 0!==this._accessToken?this._accessToken:"",this._apiKey),[f.p.contentType]:"application/json",[f.p.accessControlRequestHeaders]:`${e.useAuthHeader?`${f.p.authorization},`:""}${f.p.xAPIKey},${f.p.xProduct},${f.p.xProductLocation}`.toLowerCase()};e.product&&(t[f.p.xProduct]=e.product),e.productLocation&&(t[f.p.xProductLocation]=e.productLocation);let s="";if(v.TEMPLATED_URL_REGEX.test(e.url)){s=decodeURIComponent(new i.Z(e.url).expand(e.toQueryObject()));const t=s.split("?");e.resultColumns.size>0&&(t[1]+=`&${e.resultColumns}`),e.extraQueryParameters.keys.length>0&&(t[1]+=`&${e.extraQueryParameters}`),e.featureFlags.size>0&&(t[1]+=`&${e.featureFlags}`),s=t.join("?")}else s=`${e.url}?${e}`;if("undefined"==typeof fetch&&this._host){const e={host:this._host,logger:d.Yd.singleton(),url:s,fetchRequestOptions:{method:"GET",headers:t},returnFinalResponse:!0,timeout:3e4},i=await(0,c.q)(e);return this._addOriginToResults(await i.json())}const r=await fetch(s,{headers:t});return this._addOriginToResults(await r.json())}_addOriginToResults(e){return(0,E.$)(e)?{...e,files:e.files.map((e=>({...e,origin:a.z.stock})))}:{code:"500",error:"malformed response",case:"client-side  no case"}}async downloadImage(e){if(!this._accessToken)throw new Error("AdobeStockClient must be initialized with an access token to download images");const t=new URL(e.url);t.searchParams.append("max_long_edge","4096"),t.searchParams.append(g.s.clientSideAuthFlow,"1"),h.q.lowerStockImageAllowance.enabled&&t.searchParams.append(g.s.lowerImageAllowance,"1");const s=o.LU.makeStandardHeaders(this._accessToken,this._apiKey),i=s["x-request-id"];d.Yd.info("AdobeStockClient.downloadImage: About to make request to Stock",{requestId:i});let r,n=await fetch(t,{headers:s});if(400===n.status&&n.redirected&&n.url&&(d.Yd.debug("AdobeStockClient.downloadImage: Initial request failed due to known redirect error, about to make workaround request"),n=await fetch(n.url)),n.ok){d.Yd.debug("AdobeStockClient.downloadImage: Request succeeded",{requestId:i});return{success:!0,image:await n.blob(),maxDimension:4096}}const a=n.headers.get("content-type")?.includes("application/json");if(a){r=(await n.json()).code}const c=r===u.h.allowanceExceeded?"debug":"error";return d.Yd[c]("AdobeStockClient.downloadImage: Request failed",{requestId:i,stockErrorCode:r}),{success:!1,stockErrorCode:r}}async licenseStockAndFireflyAssets({stockAssets:e,fireflyAssets:t}){if(!e&&!t)return{success:!0};const s=t??[];let i=[];e&&(i=e.map((e=>({content_id:Number(e)}))).filter((e=>!Number.isNaN(e.content_id))));const r=[...i,...s];if(0===r.length)return{success:!0};const n=h.q.stockHost.value+p.F.use,a=o.LU.makeStandardHeaders(this._accessToken??"",this._apiKey,h.q.ingestAppName.value);try{const e={method:"POST",headers:a,body:JSON.stringify({assets:r})},t=await(0,c.q)({host:this._host,logger:d.Yd.singleton(),url:n,fetchRequestOptions:e,returnFinalResponse:!0,retryOptionsToOverride:m()});if(o.LU.isErrorStatus(t.status)){const e={success:!1,errorMessage:`Unable to license stock content: Status: ${t.status}`};if(400===t.status)return d.Yd.error("AdobeStockClient:licenseStockAndFireflyAssets request contains an invalid URL format or an invalid URL host",{ErrorCode:t.status}),{success:!0};if(422===t.status){const{errors:s}=await t.json();e.errors=s,e.errorMessage=s?this._generateErrorMessage(s):void 0}else d.Yd.error("AdobeStockClient:licenseStockAndFireflyAssets Stock licensing request failed",{ErrorCode:t.status});return e}return{success:!0}}catch(e){d.Yd.error("AdobeStockClient:licenseStockAndFireflyAssets Stock licensing request failed",{Error:e});return{success:!1,errorMessage:`Unable to license stock content: ${e}`}}}async _provisionStockAccess(e,t){const s=await fetch(e,{method:"POST",headers:t});if(o.LU.isErrorStatus(s.status))throw n.o.fromResponse(s);return{success:!0}}async provisionStockAccessWithRetry(){if(!this._accessToken)return{success:!1,errorMessage:"Unable to provision stock access: AuthToken is missing"};const e=h.q.stockHost.value+p.F.provision,t=o.LU.makeStandardHeaders(this._accessToken,this._apiKey);try{const s={delay:5e3,timeoutInterval:3e4,...o.LU.getDefaultRetryOptions()};return await(0,l.X)(this._provisionStockAccess,s)(e,t)}catch(e){return{success:!1,errorMessage:`Unable to provision stock access: ${e}`}}}_generateErrorMessage(e){let t="Unable to license stock content.";return e.removed_content_ids&&e.removed_content_ids.length>0&&(t+=" Stock assets with IDs "+e.removed_content_ids.join(", ")+" have been removed and therefore cannot be licensed."),e.unavailable_content_ids&&e.unavailable_content_ids.length>0&&(t+=" Stock assets with IDs "+e.unavailable_content_ids.join(", ")+" can not be licensed for the current user."),e.requires_plan&&e.requires_plan.length>0&&(t+=" Stock assets with IDs "+e.requires_plan.join(", ")+" require a Creative Cloud paid plan."),t}async getFiles(e){let t;!0===e.shouldUseAuthHeader&&(t=this._accessToken);const s=o.LU.makeStandardHeaders(t,this._apiKey,e.product);e.additionalHeaders&&Object.assign(s,e.additionalHeaders);const i=(0,r.Z)(e.assetIds,110),n=new _.d;for(const t of i){e.assetIds=t;const i=e.getRequestUrl(h.q.stockHost.value+p.F.files);if(d.Yd.debug("Stock Files API invocation for ",e.additionalHeaders),"undefined"==typeof fetch&&this._host){const r={host:this._host,logger:d.Yd.singleton(),url:i,fetchRequestOptions:{method:"GET",headers:s},returnFinalResponse:!0},o=await(0,c.q)(r);if(!o.ok){d.Yd.error(`AdobeStockClient.getFiles: Request failed for stock asset ids: ${t}`,{additionalHeader:e.additionalHeaders,status:o.status});continue}const a=await o.json();if(a?.files){const e=a?.files;n.files.push(...e)}}else{const r=await fetch(i,{headers:s});if(!r.ok){d.Yd.error(`AdobeStockClient.getFiles: Request failed for stock asset ids: ${t}`,{additionalHeader:e.additionalHeaders,status:r.status});continue}const o=await r.json();if(o?.files){const e=o?.files;n.files.push(...e)}}}return n}};let y=v;y.TEMPLATED_URL_REGEX=/\{&|\?.*\}/},647167:(e,t,s)=>{s.d(t,{V:()=>i});class i{constructor(e){this._host=e.host,this._rrEntryName=e.rrEntryName,this._rrEntryConfigName=e.rrEntryConfigName,this._rrTrafficTargetName=e.rrTrafficTargetName,this._rrBuildSha=e.rrBuildSha,this._sessionId=e.sessionId}async ping(){return Promise.resolve("OK")}async getConfiguration(){const e=["/_rr_",this._rrEntryName,this._rrEntryConfigName,this._rrTrafficTargetName,this._rrBuildSha,`?sessionId=${this._sessionId}`].join("/");try{const t=await this._host.fetch(e);return await t.json()}catch(e){throw console.error(`Failed to get configuration from Request Router service. ${e}`),e}}}},790176:(e,t,s)=>{s.d(t,{B:()=>r});var i=s(253624);class r{constructor(){this._isFulfilled=!1,this._isRejected=!1,this._hasAdoptedOnce=!1,this._promiseInUse=!1,this.reset()}get promise(){return this._promiseInUse=!0,this._promise}get isSettled(){return this._isFulfilled||this._isRejected}get isFulfilled(){return this._isFulfilled}get isRejected(){return this._isRejected}adopt(e){return this._promiseInUse=!0,e.then(this._resolvePromise).catch(this._rejectPromise),this.promise}adoptOnce(e){return this._promiseInUse=!0,this._hasAdoptedOnce||(this.adopt(e()),this._hasAdoptedOnce=!0),this.promise}resolve(e){this._resolvePromise(e)}reject(e){this._rejectPromise(e)}reset(){!this._isFulfilled&&!this._isRejected&&this._promiseInUse&&this._rejectPromise&&this._rejectPromise(new i.R("DeferredPromiseReset","Deferred was reset before result arrived")),this._isFulfilled=!1,this._isRejected=!1,this._hasAdoptedOnce=!1,this._promiseInUse=!1,this._promise=new Promise(((e,t)=>{this._resolvePromise=t=>{this._isFulfilled=!0,this._isRejected=!1,e(t)},this._rejectPromise=e=>{this._isRejected=!0,this._isFulfilled=!1,t(e)}}))}}},647435:(e,t,s)=>{s.d(t,{o:()=>o});var i=s(329108),r=s(253624);class o extends r.R{constructor(e,t,s,r){super(s||"Http",t||i.v[e],r),this._httpStatus=e,this._headers={},!r||r instanceof Error||(r.requestId&&(this._headers.requestId=r.requestId),r.retryAfter&&(this._headers.retryAfter=r.retryAfter))}static fromResponse(e,t,s,i){const r={requestId:e.headers.get("x-request-id")||e.headers.get("x-ms-request-id")||e.headers.get("x-amz-request-id"),retryAfter:e.headers.get("Retry-After")},n=Object.assign({},i,r);return new o(e.status,s||e.statusText,t,n)}getDataRepresentation(e={skipStack:!1}){return Object.assign({},super.getDataRepresentation(e),{kind:"HttpError",httpStatus:this._httpStatus,headers:this._headers})}get headers(){return this._headers}get httpStatus(){return this._httpStatus}get fullStack(){let e=this.stack?`Request ID: ${this._headers.requestId}, ${this.stack}`:"";return this.previousError&&(e+="\nFrom previous error: ",this.previousError instanceof r.R?e+=this.previousError.fullStack:e+=this.previousError.stack),e}get messageWithCode(){return`${this.code}: ${this.httpStatus}: ${this.message}`}get fullLogMetadata(){return this.logMetadata?(this.logMetadata.externalErrorRequestId=this._headers.requestId,this.logMetadata.retryAfter=this._headers.retryAfter):this.logMetadata={externalErrorRequestId:this._headers.requestId,retryAfter:this._headers.retryAfter},super.fullLogMetadata}}},253624:(e,t,s)=>{s.d(t,{R:()=>n});var i=s(402820),r=s(262037),o=s(537308);Error.stackTraceLimit=50;class n extends Error{constructor(e,t,s){super(t),this._code=e,this._isExpected=!1,this.name=e+"Error",s&&(s instanceof Error?this.previousError=s:(this.previousError=s.previousError,this.category=s.category,this.logMetadata=s.logMetadata,this.isExpected=Boolean(s.isExpected)))}get code(){return this._code}get uuid(){return this._uuid||(this._uuid=(0,i.Z)()),this._uuid}set uuid(e){this._uuid=e}get isExpected(){return!!this._isExpected||this.previousError instanceof n&&this.previousError.isExpected}set isExpected(e){this._isExpected=e}hasErrorCode(e){return this.code===e||this.previousError instanceof n&&this.previousError.hasErrorCode(e)}findErrorBy(e){return e(this)?this:this.previousError instanceof n?this.previousError.findErrorBy(e):void 0}getDataRepresentation(e={skipStack:!1}){const t={kind:"HzError",code:this.code,message:this.message,stack:e.skipStack?void 0:this.stack,uuid:this.uuid,category:this.category,isExpected:this.isExpected,logMetadata:this.logMetadata};return this.previousError&&(this.previousError instanceof n?t.previousErrorData=this.previousError.getDataRepresentation(e):t.previousErrorData={kind:"Error",message:this.previousError.message,stack:e.skipStack?void 0:this.previousError.stack}),(0,r.a1)(t)}_getErrorMessageWithCode(e){return(0,o.isAdobeDCXError)(e)?`${e.name}: ${e.code}: ${e.message}`:`${e.name}: ${e.message}`}_getDCXUnderlyingErrorMessage(e){let t=this._getErrorMessageWithCode(e);return(0,o.isAdobeDCXError)(e)&&e.underlyingError&&(t+=`\nFrom underlying error: ${this._getDCXUnderlyingErrorMessage(e.underlyingError)}`),t}_getDCXErrorFullStack(e){let t=e.stack;return(0,o.isAdobeDCXError)(e)&&e.underlyingError&&(t+=`\nFrom underlying error: ${this._getDCXErrorFullStack(e.underlyingError)}`),t}get fullStack(){let e=this.stack||"";return this.previousError&&(e+="\nFrom previous error: ",this.previousError instanceof n?e+=this.previousError.fullStack:(0,o.isAdobeDCXError)(this.previousError)?e+=this._getDCXErrorFullStack(this.previousError):e+=this.previousError.stack),e.replace(/access_token=[0-9A-Za-z-._%=]+/,"")}get messageWithCode(){return this.category?`${this.category}: ${this.code}: ${this.message}`:`${this.code}: ${this.message}`}get fullMessageWithCode(){let e=this.messageWithCode;return this.previousError&&(e+="\nFrom previous error: ",this.previousError instanceof n?e+=this.previousError.fullMessageWithCode:(0,o.isAdobeDCXError)(this.previousError)?e+=this._getDCXUnderlyingErrorMessage(this.previousError):e+=this.previousError),e}get fullLogMetadata(){let e=this.logMetadata;if(this.previousError instanceof n){const t=this.previousError.fullLogMetadata;t&&(e=Object.assign({},this.logMetadata),e.previousLogMetadata=t)}return e}}},624451:(e,t,s)=>{s.d(t,{X:()=>n,Z:()=>r});var i=s(253624),r=(e=>(e[e.EXACT=0]="EXACT",e[e.MINIMUM=1]="MINIMUM",e))(r||{});const o={maxAttempts:5,delay:100};function n(e,t,s){const r={...o,...t};if("number"!=typeof r.maxAttempts||r.maxAttempts<1||Math.floor(r.maxAttempts)!==r.maxAttempts)throw new Error(`retry: maxAttempts must be an integer, at least 1, found ${r.maxAttempts}`);let n=0,a=0;const c=r.progressMessagePrefix||e.name,d=(...t)=>((...t)=>{if(r.timeoutInterval){let o,a=0;const d=new Promise(((e,t)=>{const d={timedOutOperation:c,attemptNumber:n,maxAttempts:r.maxAttempts,timeoutInterval:r.timeoutInterval,...s};a=setTimeout((()=>{t(new i.R("OperationTimeout","Operation Timeout",{logMetadata:d}))}),r.timeoutInterval),o=e}));return Promise.race([e(...t),d]).then((e=>(o(),e))).finally((()=>{clearTimeout(a)}))}return e(...t)})(...t).then((e=>(r.progressCallback&&n>0&&r.progressCallback(`${c} succeeded after retries`,{failedAttempts:n,totalDelay:a}),e))).catch((async e=>{if(n++,n===r.maxAttempts)return r.progressCallback&&r.progressCallback(`${c} failed after retries, giving up.`,{failedAttempts:n,totalDelay:a},e),Promise.reject(e);if("function"==typeof r.shouldRetry&&!r.shouldRetry(e))return Promise.reject(e);let s=Math.floor(2**(n-1)*r.delay*(Math.random()+1));if("function"==typeof r.affectDelayHook){const t=r.affectDelayHook(e);t&&(0===t.type&&(s=t.value),1===t.type&&s<t.value&&(s=Math.floor(t.value*(Math.random()+1))))}if(a+=s,"function"==typeof r.preRetryHook)try{await r.preRetryHook(e)}catch(e){return r.progressCallback&&r.progressCallback(`preRetryHook of ${c} failed`,{failedAttempts:n,totalDelay:a,nextRetry:s},e),Promise.reject(e)}return r.progressCallback&&r.progressCallback(`${c} failed, trying again after delay.`,{failedAttempts:n,totalDelay:a,nextRetry:s},e),(i=s,new Promise((e=>{setTimeout(e,i)}))).then((()=>d(...t)));var i}));return d}}}]);
//# sourceMappingURL=23793.12d60fa3421feddc8970.js.map